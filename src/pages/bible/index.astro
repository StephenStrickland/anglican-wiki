---
import StarlightPage from '@astrojs/starlight/components/StarlightPage.astro';
import manifest from '../../data/bible/manifest.json';

const otBooks = manifest.filter((b) => b.testament === 'OT');
const ntBooks = manifest.filter((b) => b.testament === 'NT');
---

<StarlightPage
  frontmatter={{
    title: 'King James Bible',
    description:
      'The complete King James Version (1611) of the Holy Bible, public domain. ' +
      'Browse by book and chapter, or follow scripture links from any article.',
  }}
>
  <p class="bible-intro">
    The Authorized Version of the Bible (King James Bible, 1611), the translation
    used throughout the Anglican tradition and in the historic Books of Common Prayer.
    Click any book to browse its chapters, or follow scripture links within articles
    directly to the cited passage.
  </p>

  <div class="bible-testament">
    <h2>Old Testament</h2>
    <ul class="bible-book-grid">
      {otBooks.map((book) => (
        <li>
          <a href={`/bible/${book.slug}/`}>
            <span class="book-name">{book.name}</span>
            <span class="book-meta">{book.chapterCount} ch</span>
          </a>
        </li>
      ))}
    </ul>
  </div>

  <div class="bible-testament">
    <h2>New Testament</h2>
    <ul class="bible-book-grid">
      {ntBooks.map((book) => (
        <li>
          <a href={`/bible/${book.slug}/`}>
            <span class="book-name">{book.name}</span>
            <span class="book-meta">{book.chapterCount} ch</span>
          </a>
        </li>
      ))}
    </ul>
  </div>
</StarlightPage>

<style>
  .bible-intro {
    font-style: italic;
    color: var(--sl-color-gray-2);
    margin-bottom: 2rem;
    max-width: 65ch;
  }

  .bible-testament h2 {
    font-size: var(--sl-text-lg);
    font-family: 'EB Garamond', serif;
    border-bottom: 2px solid var(--bcp-color-gold);
    padding-bottom: 0.35rem;
    margin-bottom: 0.75rem;
    color: var(--sl-color-white);
  }

  .bible-testament {
    margin-bottom: 2.5rem;
  }

  .bible-book-grid {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(10rem, 1fr));
    gap: 0.35rem;
  }

  .bible-book-grid a {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    padding: 0.35rem 0.6rem;
    border-radius: 0.25rem;
    text-decoration: none;
    color: var(--sl-color-gray-1);
    transition: background-color 0.15s, color 0.15s;
    font-family: 'EB Garamond', serif;
    font-size: 1rem;
    gap: 0.5rem;
  }

  .bible-book-grid a:hover {
    background: color-mix(in srgb, var(--bcp-color-gold) 12%, transparent);
    color: var(--bcp-color-gold);
  }

  .book-name {
    flex: 1;
  }

  .book-meta {
    font-size: 0.72em;
    color: var(--sl-color-gray-3);
    white-space: nowrap;
    flex-shrink: 0;
  }
</style>
